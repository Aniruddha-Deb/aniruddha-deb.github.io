<!DOCTYPE html>
<html class="not-ready lg:text-base" lang="en-us" style="--bg: #faf8f1">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<title>A Note on Conditional Probability - Aniruddha Deb</title>
<meta name="theme-color"/>
<meta content="$\newcommand{\cE}[2]{\mathbf{E}(#1\ |\ #2)}$$\newcommand{\cP}[2]{\mathbf{P}(#1\ |\ #2)}$$\renewcommand{\P}[1]{\mathbf{P}(#1)}$$\newcommand{\E}[1]{\mathbf{E}(#1)}$$\newcommand{\F}{\mathcal{F}}$$\newcommand{\G}{\mathcal{G}}$$\newcommand{\ind}[1]{\mathbf{1}_{#1}}$ To motivate this note, I’ll pose the following problem:
Consider $X \sim \text{Uniform}([0,1])$. What is $\cP{X &gt; \frac{1}{2}}{X \in \mathbb{Q}}$ ?
At first glance, the answer seems simple: it’s 1/2! Closer inspection reveals that the event $X \in \mathbb{Q}$ is not measurable: the rationals have measure zero, hence from our high-school (perhaps even undergraduate) definition of conditional probability, the given probability should be undefined. However, the conditional probability does exist, and it equals 1/2." name="description"/>
<meta content="Aniruddha Deb" name="author"/>
<link as="style" href="https://aniruddhadeb.com/main.min.css" rel="preload stylesheet"/>
<link as="image" href="https://aniruddhadeb.com/theme.svg" rel="preload"/>
<link as="image" href="/pic.png" rel="preload"/>
<link as="image" href="https://aniruddhadeb.com/twitter.svg" rel="preload"/>
<link as="image" href="https://aniruddhadeb.com/github.svg" rel="preload"/>
<link as="image" href="https://aniruddhadeb.com/rss.svg" rel="preload"/>
<script>
MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    processEscapes: true
  },
  svg: {
    fontCache: 'global'
  }
};
</script>
<script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-svg.js" type="text/javascript">
</script>
<link href="https://aniruddhadeb.com/favicon/favicon.ico" rel="icon"/>
<link href="https://aniruddhadeb.com/favicon/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/>
<link href="https://aniruddhadeb.com/favicon/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/>
<link href="https://aniruddhadeb.com/favicon/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/>
<link href="https://aniruddhadeb.com/favicon/site.webmanifest" rel="manifest"/>
<meta content="Hugo 0.115.1" name="generator"/>
<meta content="A Note on Conditional Probability" itemprop="name"/>
<meta content="$\newcommand{\cE}[2]{\mathbf{E}(#1\ |\ #2)}$$\newcommand{\cP}[2]{\mathbf{P}(#1\ |\ #2)}$$\renewcommand{\P}[1]{\mathbf{P}(#1)}$$\newcommand{\E}[1]{\mathbf{E}(#1)}$$\newcommand{\F}{\mathcal{F}}$$\newcommand{\G}{\mathcal{G}}$$\newcommand{\ind}[1]{\mathbf{1}_{#1}}$ To motivate this note, I’ll pose the following problem:
Consider $X \sim \text{Uniform}([0,1])$. What is $\cP{X &gt; \frac{1}{2}}{X \in \mathbb{Q}}$ ?
At first glance, the answer seems simple: it’s 1/2! Closer inspection reveals that the event $X \in \mathbb{Q}$ is not measurable: the rationals have measure zero, hence from our high-school (perhaps even undergraduate) definition of conditional probability, the given probability should be undefined. However, the conditional probability does exist, and it equals 1/2." itemprop="description"/><meta content="2021-12-25T15:20:00+00:00" itemprop="datePublished"/>
<meta content="2021-12-25T15:20:00+00:00" itemprop="dateModified"/>
<meta content="1288" itemprop="wordCount"/>
<meta content="Mathematics," itemprop="keywords"/>
<meta content="summary" name="twitter:card"/>
<meta content="A Note on Conditional Probability" name="twitter:title"/>
<meta content="$\newcommand{\cE}[2]{\mathbf{E}(#1\ |\ #2)}$$\newcommand{\cP}[2]{\mathbf{P}(#1\ |\ #2)}$$\renewcommand{\P}[1]{\mathbf{P}(#1)}$$\newcommand{\E}[1]{\mathbf{E}(#1)}$$\newcommand{\F}{\mathcal{F}}$$\newcommand{\G}{\mathcal{G}}$$\newcommand{\ind}[1]{\mathbf{1}_{#1}}$ To motivate this note, I’ll pose the following problem:
Consider $X \sim \text{Uniform}([0,1])$. What is $\cP{X &gt; \frac{1}{2}}{X \in \mathbb{Q}}$ ?
At first glance, the answer seems simple: it’s 1/2! Closer inspection reveals that the event $X \in \mathbb{Q}$ is not measurable: the rationals have measure zero, hence from our high-school (perhaps even undergraduate) definition of conditional probability, the given probability should be undefined. However, the conditional probability does exist, and it equals 1/2." name="twitter:description"/>
</head>
<body class="text-black duration-200 ease-out dark:text-white">
<header class="mx-auto flex h-[4.5rem] max-w-4xl px-8 lg:justify-center">
<div class="relative z-50 mr-auto flex items-center">
<a class="-translate-x-[1px] -translate-y-[1px] text-2xl font-semibold" href="https://aniruddhadeb.com">Aniruddha Deb</a>
<div aria-label="Dark" class="btn-dark text-[0] ml-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.svg)_left_center/cover_no-repeat] dark:invert dark:[background-position:right]" role="button"></div>
</div>
<div aria-label="Menu" class="btn-menu relative z-50 -mr-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden" role="button"></div>
<script>
    
    const htmlClass = document.documentElement.classList;
    setTimeout(() => {
      htmlClass.remove('not-ready');
    }, 10);

    
    const btnMenu = document.querySelector('.btn-menu');
    btnMenu.addEventListener('click', () => {
      htmlClass.toggle('open');
    });

    
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    const lightBg = '#faf8f1'.replace(/"/g, '');
    const setDark = (isDark) => {
      metaTheme.setAttribute('content', isDark ? '#000' : lightBg);
      htmlClass[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark);
    };

    
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    if (htmlClass.contains('dark')) {
      setDark(true);
    } else {
      const darkVal = localStorage.getItem('dark');
      setDark(darkVal ? darkVal === 'true' : darkScheme.matches);
    }

    
    darkScheme.addEventListener('change', (event) => {
      setDark(event.matches);
    });

    
    const btnDark = document.querySelector('.btn-dark');
    btnDark.addEventListener('click', () => {
      setDark(localStorage.getItem('dark') !== 'true');
    });
  </script>
<div class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none">
<nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-6">
<a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href="/articles/">Blog</a>
<a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href="/publications/">Publications</a>
<a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href="/files/cv.pdf">CV</a>
</nav>
<nav class="mt-12 flex justify-center space-x-10 dark:invert lg:ml-12 lg:mt-0 lg:items-center lg:space-x-6">
<a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" href="https://twitter.com/hairband_dude" rel="me" style="--url: url(./twitter.svg)" target="_blank">
        twitter
      </a>
<a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" href="https://github.com/Aniruddha-Deb" rel="me" style="--url: url(./github.svg)" target="_blank">
        github
      </a>
<a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" href="https://aniruddhadeb.com/index.xml" rel="alternate" style="--url: url(./rss.svg)" target="_blank">
        rss
      </a>
</nav>
</div>
</header>
<main class="prose prose-neutral relative mx-auto min-h-[calc(100%-9rem)] max-w-4xl px-8 pb-16 pt-12 dark:prose-invert">
<article>
<header class="mb-16">
<h1 class="!my-0 pb-2.5">A Note on Conditional Probability</h1>
<div class="text-sm antialiased opacity-60">
<time>Dec 25, 2021</time>
</div>
</header>
<section><p>$\newcommand{\cE}[2]{\mathbf{E}(#1\ |\ #2)}$$\newcommand{\cP}[2]{\mathbf{P}(#1\ |\ #2)}$$\renewcommand{\P}[1]{\mathbf{P}(#1)}$$\newcommand{\E}[1]{\mathbf{E}(#1)}$$\newcommand{\F}{\mathcal{F}}$$\newcommand{\G}{\mathcal{G}}$$\newcommand{\ind}[1]{\mathbf{1}_{#1}}$
To motivate this note, I’ll pose the following problem:</p>
<blockquote>
<p>Consider $X \sim \text{Uniform}([0,1])$. What is $\cP{X &gt; \frac{1}{2}}{X \in \mathbb{Q}}$ ?</p>
</blockquote>
<p>At first glance, the answer seems simple: it’s 1/2! Closer inspection reveals that the event $X \in \mathbb{Q}$ is not measurable: the rationals have measure zero, hence from our high-school (perhaps even undergraduate) definition of conditional probability, the given probability should be undefined. However, the conditional probability does exist, and it equals 1/2.</p>
<h2 id="redefining-conditional-probability">Redefining Conditional Probability</h2>
<p>To account for events of measure zero, we must first redefine $\cP{A}{B}$. So far, we’ve defined this as $\cP{A}{B} = \P{A \cap B}\ /\ \P{B}$, $\P{B} \ne 0$. We overcome the case where $\P{B} = 0$ by defining <strong>conditional probability as a random variable that satisfies some properties</strong>. The intuition behind this is that if the conditional probability doesn’t exist by the previous definition, we can use expectation to say that it ‘might’ exist and be equal to some expected value. This also nicely sets us up for conditional expectation and variance, and the law of total expectation and law of total variance. Before formally defining conditional probability, Recall the following definitions first:</p>
<blockquote>
<p><strong>Definition</strong>: A Sub-$\sigma$ algebra of $\F$ is a $\sigma$ algebra $\G$ such that $\G \subset \F$</p>
</blockquote>
<blockquote>
<p><strong>Definition</strong>: A Measurable Function $f: (X,\Sigma) \to (Y,\Gamma)$ between two measurable spaces is a function such that for every $E \in \Gamma$, $\{x \in X\ |\ f(x) \in E\} \in \Sigma$. If $(Y, \Gamma) = (\mathbb{R}, \mathcal{B}(\mathbb{R}))$, then $f$ is said to be $\Sigma$-measurable</p>
</blockquote>
<blockquote>
<p><strong>Definition</strong>: The $\sigma$-algebra generated by a function $f: (X,\Sigma) \to (Y, \Gamma)$ is the collection of all inverse images $f^{-1}(S),\ S \in \Gamma$.
$$\sigma(f) := \{ f^{-1}(S) : S \in \Gamma \}$$</p>
</blockquote>
<p>With these three definitions, we define the conditional probability function on a sub-$\sigma$ algebra $\G$ as follows:</p>
<blockquote>
<p><strong>Definition</strong>: The conditional probability $\cP{\cdot}{\G}$ is a $\G$-measurable random variable such that $$\E{\cP{A}{\G}\ind{G}} = \P{A \cap G} \quad \forall\ G \in \G$$ In terms of integrals, we can rewrite this as $$\int_G \cP{A}{\G} d\mathbf{P} = \P{A \cap G}$$</p>
</blockquote>
<p>Defining the conditioning on a sub-$\sigma$ algebra rather than an event or another random variable has the following benefits:</p>
<ul>
<li>If we want to condition on a random variable $X$, then $\G = \sigma(X)$</li>
<li>If we want to condition on multiple random variables $X_1, X_2, \ldots$, then $\G = \sigma(X_1, X_2, \ldots)$ where $\sigma(X_1, X_2) = \{ \{X_1 \le a\} \cap \{X_2 \le b\}\ |\ a,b \in \mathbb{R}\}$ (can be extended to a countable sequence of random variables)</li>
</ul>
<p>Therefore, this definition of conditional probability is the most general definition.</p>
<h2 id="existence-and-uniqueness-of-conditional-probability">Existence and Uniqueness of Conditional Probability</h2>
<p>From the integral definition, it may be obvious that <strong>conditional probability is unique up to a set of measure zero</strong>, that is, if $\P{A} = 0$, then $\cP{A}{\G}$ can take any value. This leads to the problem of <em>regularized conditional probability</em>. Essentially, we define values for sets whose measure is zero such that the resulting conditional probability function is ’nice’, ie measurable. This would need us to set up constructs such as a <a href="https://en.wikipedia.org/wiki/Radon_space">Polish Space</a> and then use some functional analysis results, but we’ll not get into that in this article.</p>
<p>Existence can be proved in many ways: here, we use the Radon-Nikodym theorem. I won’t be proving the theorem, but I’ll quote it, along with some exposition, which should be sufficient.</p>
<blockquote>
<p><strong>Definition</strong>: A measure $\mu$ is said to be <em>absolutely continuous</em> with respect to another measure $\lambda$ (both defined on the same $\sigma$-algebra) if for every measurable set $A$, $\lambda(A) = 0 \implies \mu(A) = 0$. We denote this as $\mu \ll \lambda$, and we say that $\lambda$ <em>dominates</em> $\mu$</p>
</blockquote>
<blockquote>
<p><strong>Theorem (Radon-Nikodym):</strong> if $\mu$ and $\lambda$ are defined on $(X,\Sigma)$ such that $mu \ll \lambda$, then there exists a $\Sigma$-measurable function $f$ such that for any $A \in \Sigma$, $$\mu(A) = \int_A f\ d\lambda$$
The function $f$ is called the <em>radon-nikodym</em> derivative of $\mu$ and is denoted as $d\mu/d\lambda$.</p>
</blockquote>
<p>We now prove our claim</p>
<blockquote>
<p><strong>Claim:</strong> $\cP{A}{\G}$ exists and is unique upto a set of probability 0</p>
</blockquote>
<p><strong>Proof:</strong> Define $\cP{A}{\G}$ to simply be $d\nu/d\mathbf{P}_\G$, where $\mathbf{P}_\G$ is simply $\mathbf{P}$ restricted to $\G$, and $$\nu(E) = \P{A \cap E}$$ Note $\nu \ll \mathbf{P}_\G$ and by the radon-nikodym theorem, $\cP{A}{\G}$ exists and is unique upto a set of probability 0. Note that defining $\cP{A}{\G}$ like so also takes care of the definition, as $$\E{\cP{A}{\G}\ind{G}} = \int_G \frac{d\nu}{d\mathbf{P}_\G}\ d\mathbf{P}_\G = \nu(G) = \P{A \cap G}$$</p>
<h2 id="conditional-expectation-and-deriving-conditional-probability-from-conditional-expectation">Conditional Expectation, and deriving Conditional Probability from Conditional Expectation</h2>
<p>Conditional expectation is defined in much the same way: as a random variable satisfying the property $\E{\cE{Y}{\G}\ind{G}} = \E{Y \ind{G}}$. In a handwavy sense, conditional expectation is ’the best approximation’ of the specified quantity, given the information we have from $\G$. There’s a very nice functional analysis proof of this which treats random variables as vectors in a functional space and then approximates them using expectation, but I’ll leave that out for now.</p>
<p>Most of the same properties as conditional probability apply to conditional expectation as well, just that in the proof of existence, since expectation can be negative and we need a positive value for it to be a measure, we define $\cE{A}{\G}$ as $d\E{A^+ \ind{G}}/d\mathbf{P}_\G - d\E{A^- \ind{G}}/d\mathbf{P}_\G$ and proceed similarly.</p>
<p>In several textbooks, conditional expectation is derived first, and conditional probability follows. This is because $\cP{A}{\G} = \cE{\ind{A}}{\G}$. Also, a neat proof involving functional analysis is used to prove the existence of conditional expectation: $\cE{Y}{\G}$ is the orthogonal projection of $Y$ onto the closed subspace $\mathbb{L}^2(\G)$, and from results about hilbert space, we can prove this.</p>
<h2 id="the-problem">The Problem</h2>
<p>Now that we have this definition, how do we apply it? Sadly, we can’t directly obtain the conditional probability from it (unless we evaluate the radon-nikodym derivative), and the best we can do is assume that the conditional probability is a reasonable random variable, and then verify that it satisfies the definition.</p>
<p>For the given problem, $\G = \sigma(\mathbb{Q})$. This is because for $\cP{\{X &gt; x\}}{\G}$ to be $\G$-measurable, $G$ must have all the information we’re given, namely whether $X$ is rational or not, hence the specification of the sub-$\sigma$ algebra as mentioned. You can also think of it from the best approximation perspective: we’re only given information about whether X is rational or not and about X’s magnitude, and both those quantities are expressed in this sub-$\sigma$ algebra. Now, let $\cP{\{X &gt; x\}}{\G} = 1-x$. This is $\G$-measurable (the preimage of any borel set lies in $\G$). Verifying the two integrals gives us
$$\begin{align}
\P{\{X &gt; x\} \cup G} &amp;= \int_G \int_x^1 1\ d\mathbf{P}\ d\mathbf{P_0}\\
&amp;= \int_G 1-x\ d\mathbf{P_0}
\end{align}$$
$$\E{\cP{\{X &gt; x\}}{\G}\ind{G}} = \int_G 1-x\ d\mathbf{P_0}$$
Since both these integrals are equal for all $G \in \G$, we have $\cP{X &gt; \frac{1}{2}}{X \in \mathbb{Q}} = 1/2$.</p>
<h3 id="references">References:</h3>
<ol>
<li>Rosenthal, Jeffrey S. <em>A First Look at Rigorous Probability Theory</em>. 2nd ed, World Scientific, 2006.</li>
<li><a href="https://math.stackexchange.com/questions/2306986/uniqueness-of-conditional-expectation">https://math.stackexchange.com/questions/2306986/uniqueness-of-conditional-expectation</a></li>
<li><a href="https://stats.stackexchange.com/questions/395310/what-does-conditioning-on-a-random-variable-mean">https://stats.stackexchange.com/questions/395310/what-does-conditioning-on-a-random-variable-mean</a></li>
<li><a href="https://www.stat.berkeley.edu/users/pitman/s205f02/lecture15.pdf">https://www.stat.berkeley.edu/users/pitman/s205f02/lecture15.pdf</a> (this contains the projection proof)</li>
<li><a href="http://www.stat.cmu.edu/~arinaldo/Teaching/36752/S18/Notes/lec_notes_6.pdf">http://www.stat.cmu.edu/~arinaldo/Teaching/36752/S18/Notes/lec_notes_6.pdf</a> (this too has the projection proof)</li>
<li>Billingsley, Patrick. Probability and Measure. 3rd ed, Wiley, 1995.</li>
</ol>
<h3 id="ps">PS</h3>
<p>Merry christmas to you if you’re reading this! A junior emailed me a while back, stating that he read my blog and couldn’t grasp at times why there are <em>random mathematical stuffs</em>. In my reply, the blog was supposed to be a math/programming blog with the occasional <em>random personal stuff</em>, but the tables seem to have turned :P</p>
<p>I think a good new year’s resolution would be to learn one new math topic every week and then blog about it. Technical blogging as of now takes a lot of time for me (this article took the good part of a day), and I think as I write and learn more, that time should go down.</p>
<p>Here’s to a more mathematical 2022!</p>
</section>
<footer class="mt-12 flex flex-wrap">
<a class="mb-1.5 mr-1.5 rounded-lg bg-black/[3%] px-5 py-1.5 no-underline dark:bg-white/[8%]" href="https://aniruddhadeb.com/tags/mathematics">Mathematics</a>
</footer>
<nav class="mt-24 flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]">
<a class="flex w-1/2 items-center rounded-l-md p-6 pr-3 font-semibold no-underline hover:bg-black/[2%] dark:hover:bg-white/[3%]" href="https://aniruddhadeb.com/articles/2022/iit-course-planner-1/"><span class="mr-1.5">←</span><span>Data Wrangling in Practice: Dataset Creation from Poorly Structured Sources</span></a>
<a class="ml-auto flex w-1/2 items-center justify-end rounded-r-md p-6 pl-3 font-semibold no-underline hover:bg-black/[2%] dark:hover:bg-white/[3%]" href="https://aniruddhadeb.com/articles/2021/note-on-random-variables/"><span>A Note on Random Variables</span><span class="ml-1.5">→</span></a>
</nav>
<div class="mt-24" id="disqus_thread"></div>
<script>
    const disqusShortname = 'aniruddha-deb';
    const script = document.createElement('script');
    script.src = 'https://' + disqusShortname + '.disqus.com/embed.js';
    script.setAttribute('data-timestamp', +new Date());
    document.head.appendChild(script);
  </script>
</article>
</main>
<footer class="opaco mx-auto flex h-[4.5rem] max-w-4xl items-center px-8 text-[0.9em] opacity-60">
<div class="mr-auto">
    © 2024
    <a class="link" href="https://aniruddhadeb.com">Aniruddha Deb</a>
</div>
<a class="link mx-6" href="https://gohugo.io/" rel="noopener" target="_blank">Built with Hugo️️</a>️
  <a class="link" href="https://github.com/Aniruddha-Deb/hugo-paper" rel="noopener" target="_blank">✎ Paper</a>
</footer>
</body>
</html>
